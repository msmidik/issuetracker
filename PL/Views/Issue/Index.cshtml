@model PL.Models.IssueViewModel

@{
    ViewBag.Title = "Issues";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Issues</h2>

<p>
    @Html.ActionLink("Create New", "Create", "Issue", new { area = "" }, new { @class = "btn btn-primary btn-me" })
</p>

<div>
    <span>Type: </span>
    @Html.ActionLink("ALL | ", "Index")
    @foreach (var type in Model.IssueTypes)
    {
        @Html.ActionLink(type + " | ", "IssuesByType", new { type = type })
    }
</div>

<div>
    <span>State: </span>
    @Html.ActionLink("ALL | ", "Index")
    @foreach (var state in Model.IssueStates)
    {
        @Html.ActionLink(state + " | ", "IssuesByState", new { state = state })
    }
</div>

<div>
    <span>Project: </span>
    @Html.ActionLink("ALL | ", "Index")
    @foreach (var project in Model.Projects)
    {
        @Html.ActionLink(project.Name + " | ", "IssueByProject", new { projectId = project.Id })
    }
</div>

<table class="table">
    <tr>
        <th>
            Project
        </th>
        <th>
            Type
        </th>
        <th>
            Name
        </th>
        <th>
            Date
        </th>
        <th>
            State
        </th>
        <th></th>
    </tr>

@foreach (var item in Model.Issues) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Project.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Type)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>   
            @Html.DisplayFor( modelItem => item.ApplicationDate)
        </td>  
        <td>
            @Html.DisplayFor(modelItem => item.State)
        </td>
        <td>
            @Html.ActionLink("Details", "Details", "Issue", new { id = item.Id }, new { @class = "btn btn-info btn-sm" })
             |
            @Html.ActionLink("Edit", "Edit", new { id=item.Id })
             
        </td>
    </tr>
}

</table>
